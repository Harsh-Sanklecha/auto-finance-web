<div class="container p-3">
    <div class="d-flex align-items-center">
        <button mat-flat-button color="primary">
            <mat-icon> arrow_back </mat-icon>
        </button>
        <h3 class="mb-0">Add Lender</h3>
    </div>
    <div class="wrapper">
        <mat-stepper #stepper>
            <mat-step label="Lender Details">
                <div class="form-wrapper d-flex">
                    <mat-form-field appearance="outline">
                        <mat-label>Full Name</mat-label>
                        <input matInput [(ngModel)]="lenderDetails.name">
                    </mat-form-field>
                    <mat-form-field appearance="outline">
                        <mat-label>Mobile Number</mat-label>
                        <input matInput [(ngModel)]="lenderDetails.number">
                    </mat-form-field>
                </div>
                <div class="form-wrapper d-flex">
                    <mat-form-field appearance="outline">
                        <mat-label>Auto Number</mat-label>
                        <input matInput [(ngModel)]="lenderDetails.autoNumber">
                    </mat-form-field>
                </div>
                <div class="form-wrapper d-flex">
                    <mat-form-field appearance="outline">
                        <mat-label>Address</mat-label>
                        <textarea matInput [(ngModel)]="lenderDetails.address"></textarea>
                    </mat-form-field>
                </div>
                <div class="form-wrapper d-flex">
                    <mat-form-field appearance="outline">
                        <mat-label>Aadhar Number</mat-label>
                        <input matInput [(ngModel)]="lenderDetails.aadharNumber">
                    </mat-form-field>
                    <mat-form-field appearance="outline">
                        <mat-label>License Number</mat-label>
                        <input matInput [(ngModel)]="lenderDetails.licenseNumber">
                    </mat-form-field>
                </div>
                <div class="d-flex align-items-center justify-content-end">
                    <button mat-flat-button matStepperNext color="primary">Continue</button>
                </div>
            </mat-step>
            <mat-step label="Guarantor Details">
                <div class="form-wrapper d-flex">
                    <mat-form-field appearance="outline">
                        <mat-label>Full Name</mat-label>
                        <input matInput [(ngModel)]="guarantorDetails.name">
                    </mat-form-field>
                    <mat-form-field appearance="outline">
                        <mat-label>Mobile Number</mat-label>
                        <input matInput [(ngModel)]="guarantorDetails.number">
                    </mat-form-field>
                </div>
                <div class="d-flex align-items-center justify-content-end">
                    <button mat-flat-button matStepperPrevious>Back</button>
                    <button mat-flat-button matStepperNext color="primary">Continue</button>
                </div>
            </mat-step>
            <mat-step label="EMI Details">
                <div class="d-flex gap-4">
                    <div class="col-6">
                        <div class="form-wrapper d-flex">
                            <mat-form-field appearance="outline">
                                <mat-label>Loan Amount</mat-label>
                                <input matInput [(ngModel)]="account.loanAmount" (ngModelChange)="calculateEMI()">
                            </mat-form-field>
                        </div>
                        <div class="form-wrapper d-flex">
                            <mat-form-field appearance="outline">
                                <mat-label>Rate of Interest (Per Month)</mat-label>
                                <input matInput [(ngModel)]="account.interest" (ngModelChange)="calculateEMI()">
                            </mat-form-field>
                            <mat-form-field appearance="outline">
                                <mat-label>Tenure (No. of Months)</mat-label>
                                <input matInput [(ngModel)]="account.months" (ngModelChange)="calculateEMI()">
                            </mat-form-field>
                        </div>
                        <h3>Total Amount Payable : {{ totalEMI }} </h3>
                        <h3>Total interest Payable : {{ totalEMI - account.loanAmount > 0 ? totalEMI - account.loanAmount : 0 }} </h3>
                        <h3>EMI : {{ emi[0]?.emi }} </h3>
                    </div>
                    <div class="col-6">
                        <table>
                            <tr *ngFor="let item of emi; let i=index">
                                <td> {{ i+1 }} </td>
                                <td> {{ item.amount }} </td>
                                <td> {{ item.dueDate | date: 'd MMM, y' }} </td>
                            </tr>
                        </table>
                        <button mat-flat-button color="primary" (click)="saveFinancerAndEMI()">Save</button>
                    </div>
                </div>
            </mat-step>
        </mat-stepper>
    </div>
</div>